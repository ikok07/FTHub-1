<%- include('../includes/head') -%>
<body class="profile-body">
  <% if (!user) { %>
  <main class="container">
    <div class="login-container">
      <div class="login-left-col">
        <img src="images/login.jpg" alt="" />
      </div>
      <div class="login-right-col">
        <div class="login-box">
          <div class="login-header">
            <h1>–î–æ–±—Ä–µ –¥–æ—à—ä–ª –≤ FTHub</h1>
            <small
              >–ù—è–º–∞—à –∞–∫–∞—É–Ω—Ç? <a href="/account-signup">–ù–∞—Ç–∏—Å–Ω–∏ —Ç—É–∫</a></small
            >
          </div>
          <% if (errMessage) { %>
          <div class="msg-div">
            <h2 class="error-message"><%= errMessage %></h2>
          </div>
          <% } %>

          <!-- prettier-ignore -->
          <% if (successMessage) { %>
          <div class="msg-div msg-success">
            <h2 class="success-message"><%= successMessage %></h2>
          </div>
          <% } %>

          <form action="/login" method="POST">
            <div class="login-main">
              <div class="login-email">
                <span>–ò–º–µ–π–ª</span>
                <input type="email" class="login-email-input" name="email" />
              </div>
              <div class="login-password">
                <span>–ü–∞—Ä–æ–ª–∞</span>
                <div class="login-input-password-box">
                  <input
                    type="password"
                    class="login-password-input"
                    name="password"
                  />
                  <div class="eye-button">
                    <i class="fa-regular fa-eye" id="available"></i>
                    <i
                      class="fa fa-eye-slash"
                      id="forbiddenEye"
                      aria-hidden="true"
                    ></i>
                  </div>
                </div>
              </div>
              <div class="log-div">
                <button class="log-but">–í–ª–∏–∑–∞–Ω–µ</button>
                <small
                  >–ó–∞–±—Ä–∞–≤–µ–Ω–∞ –ø–∞—Ä–æ–ª–∞?
                  <a href="/reset-password">–ù–∞—Ç–∏—Å–Ω–∏ —Ç—É–∫</a></small
                >
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <% } %> <% if (user) { %>
  <main class="profile-page-main">
    <div class="dashboard-bottom profile-bottom">
      <a href="/food" class="mobile-dashboard-but">
        <i class="fa-solid fa-angles-left profile-mobile-back"></i>
      </a>
      <a class="mobile-dashboard-but mobile-navbut">
        <i class="fa-solid fa-gear"></i>
      </a>
      <a class="mobile-training-but mobile-navbut">
        <i class="fa-solid fa-key"></i>
      </a>
      <a class="mobile-navbut">
        <i class="fa-solid fa-calendar-days"></i>
      </a>
      <form action="/logout" method="POST">
        <button type="submit" class="">
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </button>
      </form>
    </div>
    <div class="profile-left-column">
      <div class="profile-img-and-name">
        <img
          class="profile-picture"
          src="https://pictures.kare-design.com/5/KARE-51866-700x700.jpg"
          alt="profile picture"
        />
        <h3 class="user-name"><%= user.name %></h3>
        <a href="/food" class="button-blue profile-return-button"
          ><i class="fa-solid fa-angles-left"></i> <span>–ù–∞–∑–∞–¥</span></a
        >
      </div>
      <div class="profile-page-select">
        <div class="profile-page-choose-div">
          <i class="fa-solid fa-gear"></i>
          <small class="profile-panel-small" data-onpage="1"
            >–û–±—â–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</small
          >
        </div>
        <div class="profile-page-choose-div">
          <i class="fa-solid fa-key"></i>
          <small class="profile-panel-small" data-onpage="0">–°–∏–≥—É—Ä–Ω–æ—Å—Ç</small>
        </div>
        <div class="profile-page-choose-div">
          <i class="fa-solid fa-calendar-days"></i>
          <small class="profile-panel-small" data-onpage="0">–ê–±–æ–Ω–∞–º–µ–Ω—Ç</small>
        </div>
        <hr class="profile-hr" />

        <form class="profile-page-choose-div" action="/logout" method="POST">
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
          <button class="profile-logout-button">–ò–∑—Ö–æ–¥ –æ—Ç –ø—Ä–æ—Ñ–∏–ª</button>
        </form>
      </div>
    </div>
    <div class="profile-right-slide-div">
      <div class="profile-right-wrapper">
        <form class="profile-right-column" action="/save-account" method="POST">
          <h1>–û–±—â–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
          <div>
            <% if (errMessage) { %>
            <div class="msg-div acc-msg">
              <h2 class="error-message"><%= errMessage %></h2>
            </div>
            <% } %> <% if (successMessage) { %>
            <div class="msg-div msg-success acc-msg">
              <h2 class="success-message"><%= successMessage %></h2>
            </div>
            <% } %>
          </div>
          <div class="profile-settings-div">
            <div class="profile-sex-and-born-year">
              <h2>–ü–æ–ª –∏ –≥–æ–¥–∏–Ω–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ</h2>
              <div class="profile-sex-type">
                <label for="sex">–ü–æ–ª</label>
                <select name="sex" class="input after-input-stwo input-gender">
                  <% if (userDetails.sex === '–ú—ä–∂') { %>
                  <option value="–ú—ä–∂">–ú—ä–∂</option>
                  <option value="–ñ–µ–Ω–∞">–ñ–µ–Ω–∞</option>
                  <% } else if (userDetails.sex === '–ñ–µ–Ω–∞') { %>
                  <option value="–ñ–µ–Ω–∞">–ñ–µ–Ω–∞</option>
                  <option value="–ú—ä–∂">–ú—ä–∂</option>
                  <% } else { %>
                  <option value="0">–ò–∑–±–µ—Ä–∏ –ø–æ–ª</option>
                  <option value="–ú—ä–∂">–ú—ä–∂</option>
                  <option value="–ñ–µ–Ω–∞">–ñ–µ–Ω–∞</option>
                  <% } %>
                </select>
              </div>
              <div class="profile-born-year">
                <label for="born">–ì–æ–¥–∏–Ω–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ</label>
                <select name="born" class="input after-input-one input-birth">
                  <% if (userDetails.born) { %>
                  <option value="<%= userDetails.born %>">
                    <%= userDetails.born %>–≥.
                  </option>
                  <% for (let i = 2010; i >= 1980; i--) { %>
                  <option value="<%= i %>"><%= i %>–≥.</option>
                  <% } %> <% } else { %>
                  <option value="0">–ò–∑–±–µ—Ä–∏ –≥–æ–¥–∏–Ω–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ</option>
                  <% for (let i = 2010; i >= 1930; i--) { %>
                  <option value="<%= i %>"><%= i %>–≥.</option>
                  <% } %> <% } %>
                </select>
              </div>
            </div>
            <div class="profile-height-and-weight">
              <h2>–†—ä—Å—Ç –∏ —Ç–µ–≥–ª–æ</h2>
              <div class="profile-height-div">
                <label for="height">–†—ä—Å—Ç</label>
                <select name="height" class="input profile-height-input">
                  <% if (userDetails.height) { %>
                  <option value="<%= userDetails.height %>">
                    <%= userDetails.height %> —Å–º
                  </option>
                  <% for (let i = 210; i >= 110; i--) { %>
                  <option value="<%= i %>"><%= i %> —Å–º</option>
                  <% } %> <% } else { %>
                  <option value="0">–ò–∑–±–µ—Ä–∏</option>
                  <% for (let i = 210; i >= 110; i--) { %>
                  <option value="<%= i %>"><%= i %> —Å–º</option>
                  <% } %> <% } %>
                </select>
              </div>
              <div class="profile-weight-div">
                <label for="weight">–¢–µ–≥–ª–æ</label>
                <select name="weight" class="input profile-weight-input">
                  <% if (userDetails.kg) { %>
                  <option value="<%=userDetails.kg %>">
                    <%=userDetails.kg %> –∫–≥.
                  </option>
                  <% for (let i = 35; i <= 110; i++) { %>
                  <option value="<%= i %>"><%= i %> –∫–≥.</option>
                  <% } %> <% } else { %>
                  <option value="0">–ò–∑–±–µ—Ä–∏</option>
                  <% for (let i = 35; i <= 110; i++) { %>
                  <option value="<%= i %>"><%= i %> –∫–≥.</option>
                  <% } %> <% } %>
                </select>
              </div>
            </div>

            <div class="profile-sport-types">
              <h2>–ü—Ä–∞–∫—Ç–∏–∫—É–≤–∞–Ω–∏ —Å–ø–æ—Ä—Ç–æ–≤–µ</h2>
              <div class="profile-sport-type-div">
                <div id="sportTypes" class="profile-sport-type-btns">
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    üí™–§–∏—Ç–Ω–µ—Å
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    üèä–ü–ª—É–≤–∞–Ω–µ
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    üèÉ–õ–µ–∫–∞ –∞—Ç–ª–µ—Ç–∏–∫–∞
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    üö¥–ö–æ–ª–æ–µ–∑–¥–µ–Ω–µ
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    ü•ã–ö–∞—Ä–∞—Ç–µ
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    ü•ã–ö–∏–∫-–±–æ–∫—Å
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    ü•ã–¢–∞–µ–∫—É–æ–Ω–¥–æ
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    üëä–ë–æ—Ä–±–∞
                  </button>
                  <button
                    type="button"
                    name="sport"
                    value="0"
                    class="after-account-sport-types-button profile-sport-type-button"
                  >
                    ü•ãMMA
                  </button>
                  <input
                    class="hiddenSports"
                    type="hidden"
                    name="allSports"
                    value="<%= sports %>"
                  />
                </div>
              </div>
            </div>
            <div class="profile-submit-div">
              <button type="submit" class="button-blue save-button">
                –ó–∞–ø–∞–∑–∏ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ
              </button>
            </div>
          </div>
        </form>
        <div class="profile-security-div">
          <h1>–°–∏–≥—É—Ä–Ω–æ—Å—Ç</h1>
          <div class="profile-security-settings-div">
            <form
              class="profile-change-name"
              action="/change-name"
              method="POST"
            >
              <h2>–ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ</h2>
              <div class="profile-security-input-div">
                <div class="profile-first-name">
                  <label for="first-name">–ò–º–µ</label>
                  <input
                    type="text"
                    name="firstName"
                    class="input input-type"
                    value="<%= user.name.split(' ')[0] %>"
                  />
                </div>
                <div class="profile-new-first-name">
                  <label for="last-name">–§–∞–º–∏–ª–∏—è</label>
                  <input
                    type="text"
                    name="lastName"
                    class="input input-type"
                    value="<%= user.name.split(' ')[1] %>"
                  />
                </div>
              </div>
              <div class="profile-security-submit-button">
                <button class="button-blue">–ü–æ—Ç–≤—ä—Ä–¥–∏</button>
              </div>
            </form>
            <form
              class="profile-change-email"
              action="/change-email"
              method="POST"
            >
              <h2>–ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –∏–º–µ–π–ª –∞–¥—Ä–µ—Å</h2>
              <div class="profile-security-input-div">
                <div class="profile-new-email">
                  <label for="new-email">–ù–æ–≤ –∏–º–µ–π–ª –∞–¥—Ä–µ—Å</label>
                  <input
                    type="email"
                    name="newEmail"
                    class="input input-type"
                  />
                </div>
              </div>
              <div class="profile-security-submit-button">
                <button class="button-blue">–ü–æ—Ç–≤—ä—Ä–¥–∏</button>
              </div>
            </form>
            <form
              class="profile-change-password"
              action="/change-password"
              method="POST"
            >
              <h2>–ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –ø–∞—Ä–æ–ª–∞</h2>
              <div class="profile-security-input-div">
                <div class="profile-old-pass">
                  <label for="old-password">–ù–∞—Å—Ç–æ—è—â–∞ –ø–∞—Ä–æ–ª–∞</label>
                  <input
                    type="password"
                    name="oldPassword"
                    class="input input-type"
                  />
                </div>
                <div class="profile-new-pass">
                  <label for="new-password">–ù–æ–≤–∞ –ø–∞—Ä–æ–ª–∞</label>
                  <input
                    type="password"
                    name="newPassword"
                    class="input input-type"
                  />
                </div>
              </div>
              <div class="profile-security-submit-button">
                <button class="button-blue">–ü–æ—Ç–≤—ä—Ä–¥–∏</button>
              </div>
            </form>
          </div>
        </div>
        <div class="profile-subscriptions-div">
          <h1>–ê–±–æ–Ω–∞–º–µ–Ω—Ç <img src="images/Stripe Logo.svg" alt="" /></h1>
          <div class="subscription-main-options">
            <h2>–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞–π –∞–±–æ–Ω–∞–º–µ–Ω—Ç–∞ —Å–∏ —á—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª–∞ –Ω–∞ Stripe</h2>
            <a
              class="button-blue subscription-control-but"
              href="https://billing.stripe.com/p/login/test_4gwg11g7S4UC92M000"
            >
              –ö—ä–º Stripe
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>
  <% } %>
</body>
